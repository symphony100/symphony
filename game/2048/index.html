<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2048 Game (Complete)</title>
    
    <style>
        /* --- CSSéƒ¨åˆ† --- */
        :root {
            --tile-size: 80px;
            --gap: 10px;
        }

        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Clear Sans', 'Helvetica Neue', Arial, sans-serif;
            background-color: #faf8ef;
            color: #776e65;
            user-select: none; /* ãƒ†ã‚­ã‚¹ãƒˆé¸æŠã‚’ç„¡åŠ¹åŒ– */
        }

        #game-container {
            text-align: center;
            padding: 10px;
        }

        /* --- ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ãƒœã‚¿ãƒ³ --- */
        #header-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            width: calc(4 * var(--tile-size) + 5 * var(--gap)); /* ãƒœãƒ¼ãƒ‰ã®å¹…ã«åˆã‚ã›ã‚‹ */
            margin-bottom: 15px;
        }

        .header-column {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        h1 {
            font-size: 48px;
            font-weight: 700;
            color: #776e65;
            margin: 0;
        }

        #score-container {
            background-color: #bbada0;
            color: #f9f6f2;
            padding: 8px 12px;
            border-radius: 3px;
            font-size: 16px;
            font-weight: bold;
            line-height: 1;
            margin-top: 5px;
        }
        
        #score-container span {
            font-size: 24px;
            display: block;
        }

        #controls-info {
            font-size: 14px;
            color: #8f7a66;
            margin-bottom: 15px;
        }

        /* --- æ–°ã—ã„ã‚²ãƒ¼ãƒ ãƒœã‚¿ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ (ãƒ‡ã‚¶ã‚¤ãƒ³çµ±ä¸€) --- */
        .game-button {
            background-color: #8f7a66; /* ã‚¿ã‚¤ãƒ«ã®èƒŒæ™¯è‰²ã«è¿‘ã„è‰² */
            color: #f9f6f2;
            padding: 10px 15px;
            border: none;
            border-radius: 3px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.1s;
            margin-top: 5px; /* ã‚¹ã‚³ã‚¢ã®ä¸‹ã«é…ç½® */
        }
        
        .game-button:hover {
            background-color: #9f8c7b;
        }


        /* --- ãƒœãƒ¼ãƒ‰ --- */
        #board {
            display: grid;
            grid-template-columns: repeat(4, var(--tile-size));
            grid-template-rows: repeat(4, var(--tile-size));
            gap: var(--gap);
            background-color: #bbada0;
            padding: var(--gap);
            border-radius: 6px;
            position: relative; 
            touch-action: none; 
            overflow: hidden;
        }

        .cell {
            width: var(--tile-size);
            height: var(--tile-size);
            background-color: #ccc0b3;
            border-radius: 3px;
        }

        /* --- ã‚¿ã‚¤ãƒ«å…±é€šã‚¹ã‚¿ã‚¤ãƒ« --- */
        .tile {
            width: var(--tile-size);
            height: var(--tile-size);
            border-radius: 3px;
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            /* transformã§ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’åˆ¶å¾¡ */
            transition: transform 100ms ease-out; 
            z-index: 2; 
            box-sizing: border-box; 
            /* JSã§è¨­å®šã™ã‚‹ä½ç½® */
            transform: translate(var(--tile-c), var(--tile-r));
        }
        
        /* ã‚¿ã‚¤ãƒ«å‡ºç¾ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .tile-new {
            animation: appear 200ms ease-in;
        }
        
        @keyframes appear {
            0% {
                opacity: 0;
                transform: translate(var(--tile-c), var(--tile-r)) scale(0);
            }
            100% {
                opacity: 1;
                transform: translate(var(--tile-c), var(--tile-r)) scale(1);
            }
        }
        
        /* ã‚¿ã‚¤ãƒ«çµåˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .tile-merged {
            animation: pop 150ms ease-in-out;
        }

        @keyframes pop {
            0% { transform: translate(var(--tile-c), var(--tile-r)) scale(1); }
            50% { transform: translate(var(--tile-c), var(--tile-r)) scale(1.1); }
            100% { transform: translate(var(--tile-c), var(--tile-r)) scale(1); }
        }

        /* --- æ•°å­—ã”ã¨ã®è‰²ã®è¨­å®š (å‰å›ã®ã‚‚ã®ã‚’ä½¿ç”¨) --- */
        .tile-2 { background-color: #eee4da; color: #776e65; font-size: 35px; }
        .tile-4 { background-color: #ede0c8; color: #776e65; font-size: 35px; }
        .tile-8 { background-color: #f2b179; color: #f9f6f2; font-size: 35px; }
        .tile-16 { background-color: #f59563; color: #f9f6f2; font-size: 30px; }
        .tile-32 { background-color: #f67c5f; color: #f9f6f2; font-size: 30px; }
        .tile-64 { background-color: #f65e3b; color: #f9f6f2; font-size: 30px; }
        .tile-128 { background-color: #edcf72; color: #f9f6f2; font-size: 25px; }
        .tile-256 { background-color: #edcc61; color: #f9f6f2; font-size: 25px; }
        .tile-512 { background-color: #edc850; color: #f9f6f2; font-size: 25px; }
        .tile-1024 { background-color: #edc53f; color: #f9f6f2; font-size: 20px; }
        .tile-2048 { background-color: #edc22e; color: #f9f6f2; font-size: 20px; }
        
        .tile > span {
            line-height: var(--tile-size);
        }

        .hidden { display: none !important; }

        /* --- ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ --- */
        #game-over-message {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(238, 228, 218, 0.85); /* ä¸é€æ˜åº¦ã‚’å°‘ã—ä¸Šã’ã¦å¼·èª¿ */
            border-radius: 6px;
            z-index: 10;
        }
        
        #game-over-message h2 {
            color: #8f7a66;
            margin-bottom: 20px;
        }
        
        /* ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã®ãƒœã‚¿ãƒ³ã‚’çµ±ä¸€ãƒ‡ã‚¶ã‚¤ãƒ³ã«ã™ã‚‹ */
        #game-over-message .game-button {
            margin-top: 0;
            padding: 12px 25px;
            font-size: 20px;
        }

        /* --- CSSçµ‚ã‚ã‚Š --- */
    </style>
</head>
<body>
    <div id="game-container">
        
        <div id="header-row">
            <h1>2048</h1>
            <div class="header-column">
                <div id="score-container">
                    SCORE 
                    <span id="score">0</span>
                </div>
                <button onclick="initGame(true)" class="game-button">æ–°ã—ã„ã‚²ãƒ¼ãƒ </button>
            </div>
        </div>

        <div id="controls-info">
            ğŸ’» çŸ¢å°ã‚­ãƒ¼ / ğŸ“± ã‚¹ãƒ¯ã‚¤ãƒ—ã§æ“ä½œ
        </div>

        <div id="board">
            </div>

    </div>

    <script>
        // --- JavaScriptéƒ¨åˆ† ---
        const SIZE = 4;
        const STORAGE_KEY = '2048_game_state'; // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ã‚­ãƒ¼
        
        let board = [];
        let score = 0;
        let isGameOver = false;
        let isGameWon = false;
        let isMoved = false; 

        const boardElement = document.getElementById('board');
        const scoreElement = document.getElementById('score');
        
        // ã‚¹ãƒ¯ã‚¤ãƒ—å¤‰æ•°
        let touchStartX = 0;
        let touchStartY = 0;
        const SWIPE_THRESHOLD = 50;

        // --- åˆæœŸåŒ–ã¨æç”» ---

        /**
         * @brief ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã™ã‚‹
         */
        function saveGameState() {
            const gameState = {
                board: board,
                score: score,
                isGameWon: isGameWon
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(gameState));
        }

        /**
         * @brief ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã‚€
         * @returns {boolean} - èª­ã¿è¾¼ã¿ã«æˆåŠŸã—ãŸã‹
         */
        function loadGameState() {
            const savedState = localStorage.getItem(STORAGE_KEY);
            if (savedState) {
                const gameState = JSON.parse(savedState);
                board = gameState.board;
                score = gameState.score;
                isGameWon = gameState.isGameWon;
                isGameOver = false; // èª­ã¿è¾¼ã¿æ™‚ã¯å¸¸ã«ãƒ—ãƒ¬ã‚¤å¯èƒ½çŠ¶æ…‹
                return true;
            }
            return false;
        }

        /**
         * @brief ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹/åˆæœŸåŒ–ã™ã‚‹
         * @param {boolean} forceNew - å¼·åˆ¶çš„ã«æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹ã‹
         */
        function initGame(forceNew = false) {
            // å¼·åˆ¶æ–°è¦ã‚²ãƒ¼ãƒ ã§ãªãã€ä¿å­˜ã•ã‚ŒãŸçŠ¶æ…‹ãŒã‚ã‚Œã°ãã‚Œã‚’èª­ã¿è¾¼ã‚€
            if (!forceNew && loadGameState()) {
                // èª­ã¿è¾¼ã¿å®Œäº†
            } else {
                // æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹
                board = Array(SIZE).fill(0).map(() => Array(SIZE).fill(0));
                score = 0;
                isGameWon = false;
                addRandomTile();
                addRandomTile();
                saveGameState(); // åˆæœŸçŠ¶æ…‹ã‚’ä¿å­˜
            }
            
            isGameOver = false;
            // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤ºã«ã™ã‚‹
            const existingMessage = document.getElementById('game-over-message');
            if (existingMessage) existingMessage.remove();
            
            updateScore();
            drawBoard();
        }

        /**
         * @brief ãƒ©ãƒ³ãƒ€ãƒ ãªç©ºããƒã‚¹ã«2ã¾ãŸã¯4ã®ã‚¿ã‚¤ãƒ«ã‚’é…ç½®ã™ã‚‹
         * @param {boolean} isNew - æ–°è¦é…ç½®ã§ã‚ã‚‹ã‹ (ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨)
         */
        function addRandomTile(isNew = true) {
            if (isGameOver) return;
            
            const emptyCells = [];
            for (let r = 0; r < SIZE; r++) {
                for (let c = 0; c < SIZE; c++) {
                    if (board[r][c] === 0) emptyCells.push({ r, c });
                }
            }

            if (emptyCells.length === 0) {
                checkGameOver();
                return;
            }

            const index = Math.floor(Math.random() * emptyCells.length);
            const { r, c } = emptyCells[index];
            board[r][c] = Math.random() < 0.9 ? 2 : 4;
            
            // æ–°è¦ã‚¿ã‚¤ãƒ«ã‚’å³åº§ã«æç”»ã™ã‚‹ãŸã‚ã®ãƒ•ãƒ©ã‚°ã‚’è¨­å®š (ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨)
            if (isNew) {
                drawTile(r, c, board[r][c], true);
            }
        }

        /**
         * @brief ãƒœãƒ¼ãƒ‰é…åˆ—ã®å†…å®¹ã«åŸºã¥ã„ã¦ã€DOMã‚’æ›´æ–°ï¼ˆã‚¿ã‚¤ãƒ«ã®æç”»ï¼‰ã™ã‚‹
         */
        function drawBoard() {
            // èƒŒæ™¯ã®ã‚»ãƒ«ã‚’æç”»
            boardElement.innerHTML = ''; 
            for (let i = 0; i < SIZE * SIZE; i++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                boardElement.appendChild(cell);
            }
            
            // ã‚¿ã‚¤ãƒ«ã‚’æç”»
            for (let r = 0; r < SIZE; r++) {
                for (let c = 0; c < SIZE; c++) {
                    const value = board[r][c];
                    if (value !== 0) {
                        drawTile(r, c, value, false);
                    }
                }
            }
        }
        
        /**
         * @brief å€‹åˆ¥ã®ã‚¿ã‚¤ãƒ«ã‚’æç”»ã™ã‚‹é–¢æ•°
         * @param {number} r - è¡Œ
         * @param {number} c - åˆ—
         * @param {number} value - ã‚¿ã‚¤ãƒ«ã®å€¤
         * @param {boolean} isNew - æ–°è¦ã‚¿ã‚¤ãƒ«ã‹ã©ã†ã‹ (å‡ºç¾ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨)
         * @param {boolean} isMerged - çµåˆã•ã‚ŒãŸã‚¿ã‚¤ãƒ«ã‹ã©ã†ã‹ (çµåˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨)
         */
        function drawTile(r, c, value, isNew, isMerged = false) {
            const TILE_OFFSET = 10; 
            const TILE_SIZE = 80;

            const tile = document.createElement('div');
            tile.classList.add('tile', `tile-${value}`);
            if (isNew) tile.classList.add('tile-new');
            if (isMerged) tile.classList.add('tile-merged');

            // ã‚¿ã‚¤ãƒ«ã®ä½ç½®ã‚’CSSå¤‰æ•°ã§è¨­å®š (transformã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾å¿œ)
            const leftPos = c * (TILE_SIZE + TILE_OFFSET) + TILE_OFFSET;
            const topPos = r * (TILE_SIZE + TILE_OFFSET) + TILE_OFFSET;
            
            tile.style.setProperty('--tile-c', `${leftPos}px`);
            tile.style.setProperty('--tile-r', `${topPos}px`);

            tile.innerHTML = `<span>${value}</span>`;
            boardElement.appendChild(tile);
        }

        function updateScore() {
            scoreElement.textContent = score;
        }
        
        function showMessage(win) {
            isGameOver = true;
            localStorage.removeItem(STORAGE_KEY); // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼/å‹åˆ©æ™‚ã¯ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ¶ˆã™
            
            const messageDiv = document.createElement('div');
            messageDiv.id = 'game-over-message';
            messageDiv.innerHTML = `
                <h2>${win ? '2048é”æˆï¼ å‹åˆ©ã‚„ï¼' : 'GAMEOVER ã‚„...'}</h2>
                <button onclick="initGame(true)" class="game-button">ã‚‚ã†ä¸€åº¦</button>
            `;
            boardElement.appendChild(messageDiv);
        }
        
        function checkGameOver() {
            if (isGameWon) return;

            // ç©ºããƒã‚¹ãƒã‚§ãƒƒã‚¯ã¨çµåˆå¯èƒ½ãƒã‚§ãƒƒã‚¯ã¯å‰å›ã¨åŒã˜
            for (let r = 0; r < SIZE; r++) {
                for (let c = 0; c < SIZE; c++) {
                    if (board[r][c] === 0) return;
                    if (c < SIZE - 1 && board[r][c] === board[r][c + 1]) return;
                    if (r < SIZE - 1 && board[r][c] === board[r + 1][c]) return;
                }
            }
            showMessage(false);
        }

        // --- ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ (ã‚³ã‚¢éƒ¨åˆ†) ---
        
        /**
         * @brief ä¸€ã¤ã®è¡Œ/åˆ—ã‚’ç§»å‹•ãƒ»çµåˆã™ã‚‹ (å·¦æ–¹å‘ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¸€èˆ¬åŒ–)
         */
        function operateLine(line) {
            let scoreDelta = 0;
            
            // 1. ã‚¼ãƒ­ã‚’è©°ã‚ã‚‹
            let newArray = line.filter(val => val !== 0);
            
            // 2. çµåˆã™ã‚‹
            for (let i = 0; i < newArray.length - 1; i++) {
                if (newArray[i] !== 0 && newArray[i] === newArray[i + 1]) {
                    newArray[i] *= 2; 
                    scoreDelta += newArray[i];
                    if (newArray[i] === 2048) isGameWon = true;
                    newArray[i + 1] = 0; 
                }
            }
            
            // 3. å†åº¦ã‚¼ãƒ­ã‚’è©°ã‚ã¦ã€SIZEã®é•·ã•ã«ã™ã‚‹
            newArray = newArray.filter(val => val !== 0);
            while (newArray.length < SIZE) {
                newArray.push(0);
            }
            
            const moved = JSON.stringify(line) !== JSON.stringify(newArray);
            if (moved) isMoved = true;

            return { line: newArray, scoreDelta };
        }
        
        /**
         * @brief ãƒœãƒ¼ãƒ‰ã‚’90åº¦æ™‚è¨ˆå›ã‚Šã«å›è»¢ã•ã›ã‚‹é–¢æ•°
         */
        function rotateBoard(b) {
            const newBoard = Array(SIZE).fill(0).map(() => Array(SIZE).fill(0));
            for (let r = 0; r < SIZE; r++) {
                for (let c = 0; c < SIZE; c++) {
                    newBoard[c][SIZE - 1 - r] = b[r][c];
                }
            }
            return newBoard;
        }

        /**
         * @brief ãƒœãƒ¼ãƒ‰å…¨ä½“ã‚’å·¦ã«ç§»å‹•ã•ã›ã‚‹ (å›è»¢ã¨çµ„ã¿åˆã‚ã›ã‚‹ãŸã‚ã®åŸºæœ¬æ“ä½œ)
         */
        function moveLeftOnly() {
            let totalScoreDelta = 0;

            for (let r = 0; r < SIZE; r++) {
                const result = operateLine(board[r]);
                board[r] = result.line;
                totalScoreDelta += result.scoreDelta;
            }
            return totalScoreDelta;
        }

        /**
         * @brief æ–¹å‘ã‚­ãƒ¼å…¥åŠ›æ™‚ã®ãƒ¡ã‚¤ãƒ³å‡¦ç†
         * @param {number} direction - 0:å·¦, 1:ä¸Š, 2:å³, 3:ä¸‹
         */
        function handleMove(direction) {
            if (isGameOver) return;
            
            // 1. ç›¤é¢ã‚’å›è»¢ã•ã›ã¦å·¦ç§»å‹•ã®å½¢ã«ã™ã‚‹
            let rotations = (4 - direction) % 4; 
            for (let i = 0; i < rotations; i++) {
                board = rotateBoard(board);
            }

            // 2. å·¦ã«ç§»å‹•ã•ã›ã‚‹
            isMoved = false; 
            const scoreDelta = moveLeftOnly();
            score += scoreDelta;
            
            // 3. å…ƒã®æ–¹å‘ã«æˆ»ã™
            let reverseRotations = direction;
            for (let i = 0; i < reverseRotations; i++) {
                board = rotateBoard(board);
            }

            // 4. ç§»å‹•ãŒã‚ã£ãŸå ´åˆã®ã¿å‡¦ç†ã‚’é€²ã‚ã‚‹
            if (isMoved) {
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã®æ™‚é–“ç¨¼ãã‚’ã—ã¦ã‹ã‚‰ã€æ–°ã—ã„ã‚¿ã‚¤ãƒ«ã‚’ç”Ÿæˆãƒ»æç”»ãƒ»ä¿å­˜ã™ã‚‹
                setTimeout(() => {
                    addRandomTile(true); // æ–°è¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ©ã‚°ã‚’true
                    drawBoard(); // å…¨ä½“ã®å†æç”» (çµåˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯çœç•¥)
                    updateScore();
                    saveGameState(); // ç§»å‹•å¾Œã®çŠ¶æ…‹ã‚’ä¿å­˜
                    
                    if (isGameWon && !isGameOver) {
                        showMessage(true);
                    } else {
                        checkGameOver();
                    }
                }, 100); // CSSã®transitionæ™‚é–“ã¨åŒã˜ã‹å°‘ã—é•·ã‚ã«è¨­å®š
                
            } else {
                checkGameOver();
            }
        }

        // --- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ ---
        function handleKeydown(event) {
            if (isGameOver) return;
            
            let direction = -1; 
            
            switch (event.key) {
                case 'ArrowLeft': case 'a': direction = 0; break;
                case 'ArrowUp': case 'w': direction = 1; break;
                case 'ArrowRight': case 'd': direction = 2; break;
                case 'ArrowDown': case 's': direction = 3; break;
                default: return; 
            }
            
            handleMove(direction);
            event.preventDefault();
        }
        
        // --- ã‚¹ãƒ¯ã‚¤ãƒ—æ“ä½œ ---
        boardElement.addEventListener('touchstart', (event) => {
            if (isGameOver) return;
            touchStartX = event.touches[0].clientX;
            touchStartY = event.touches[0].clientY;
        }, { passive: false });

        boardElement.addEventListener('touchend', (event) => {
            if (isGameOver) return;

            const touchEndX = event.changedTouches[0].clientX;
            const touchEndY = event.changedTouches[0].clientY;
            
            const dx = touchEndX - touchStartX;
            const dy = touchEndY - touchStartY;
            
            if (Math.abs(dx) < SWIPE_THRESHOLD && Math.abs(dy) < SWIPE_THRESHOLD) {
                return;
            }

            let direction = -1;
            
            if (Math.abs(dx) > Math.abs(dy)) {
                direction = dx > 0 ? 2 : 0; // å³(2) or å·¦(0)
            } else {
                direction = dy > 0 ? 3 : 1; // ä¸‹(3) or ä¸Š(1)
            }
            
            if (direction !== -1) {
                handleMove(direction);
            }
        });
        
        // --- ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œéƒ¨åˆ† ---
        
        document.addEventListener('keydown', handleKeydown);
        initGame(false); // èµ·å‹•æ™‚ã«ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Œã°ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
        
    </script>
</body>
</html>
